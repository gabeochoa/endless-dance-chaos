# Test artist schedule and stage state machine
reset_game
wait_frames 5

# Force a known artist starting at 10:00 with 45min duration
force_artist TestAct 50 45 10 0
wait_frames 5

# Before announce window - should be idle
set_time 9 30
wait_frames 5
assert_stage_state idle

# Announce window (15 min before start = 9:45)
set_time 9 45
wait_frames 5
assert_stage_state announcing

# Performance time
set_time 10 5
wait_frames 5
assert_stage_state performing

# After set ends (10:00 + 45min = 10:45), state returns to idle
# (Clearing is a single-frame transition state)
set_time 10 50
wait_frames 5
assert_stage_state idle
