# Test facility service: agents with bathroom need reach the bathroom
reset_game
set_spawn_enabled 0
set_agent_speed 5
wait_frames 5

# Build paths connecting stage area to bathroom
draw_path_rect 0 24 33 28
draw_path_rect 19 19 22 31
wait_frames 5

# Spawn agents near the stage, let them settle briefly
spawn_agents 30 26 5 stage
wait 1

# Force bathroom need - agents should leave stage and walk to bathroom
force_need bathroom
wait 8

# Agents should be near the bathroom (20,20)
assert_agent_near 20 21 4

# All agents should survive the trip
assert_agent_count gte 5
assert_death_count eq 0
screenshot 04_facility_service
